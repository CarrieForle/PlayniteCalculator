<UserControl x:Class="Calculator.SidebarView"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:local="clr-namespace:Calculator"
			 mc:Ignorable="d"
			 d:DataContext="{d:DesignInstance Type=local:SidebarView}"
			 d:DesignHeight="800" d:DesignWidth="1100">
	<UserControl.Resources>
		<Style TargetType="TextBlock" BasedOn="{StaticResource BaseTextBlockStyle}" />
		<Style x:Key="LabelStyle" TargetType="TextBlock" BasedOn="{StaticResource BaseTextBlockStyle}">
			<Setter Property="Foreground" Value="{DynamicResource TextBrushDarker}"/>
			<Setter Property="FontStyle" Value="Italic"/>
			<Setter Property="Margin" Value="0,0,0,5"/>
		</Style>
		<Style x:Key="ValueStyle" TargetType="TextBlock"  BasedOn="{StaticResource BaseTextBlockStyle}">
			<Setter Property="FontSize" Value="36"/>
		</Style>
		<Style x:Key="Card" TargetType="StackPanel">
			<Setter Property="Margin" Value="30"/>
		</Style>
		<Style x:Key="SmallGrid" TargetType="DataGrid" BasedOn="{StaticResource {x:Type DataGrid}}">
			<Setter Property="IsHitTestVisible" Value="False" />
			<Setter Property="Margin" Value="0,5,0,20" />
			<Setter Property="SelectionMode" Value="Single" />
			<Setter Property="SelectionUnit" Value="FullRow" />
			<Setter Property="AutoGenerateColumns" Value="False" />
			<Setter Property="IsReadOnly" Value="True" />
			<Setter Property="CanUserAddRows" Value="False" />
			<Setter Property="CanUserDeleteRows" Value="False" />
			<Setter Property="CanUserResizeColumns" Value="False" />
			<Setter Property="CanUserResizeRows" Value="False" />
			<Setter Property="CanUserReorderColumns" Value="False" />
			<Setter Property="HeadersVisibility" Value="None" />
			<Setter Property="GridLinesVisibility" Value="All" />
			<Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource NormalBrush}" />
			<Setter Property="VerticalGridLinesBrush" Value="{DynamicResource NormalBrush}" />
			<Setter Property="BorderBrush" Value="{DynamicResource NormalBrush}" />
		</Style>
		<Style x:Key="SmallGridCell" TargetType="DataGridCell">
			<Setter Property="Background" Value="{x:Null}" />
			<Setter Property="Padding" Value="7" />
			<Setter Property="BorderBrush" Value="{x:Null}" />
			<!-- From Default Playnite theme. In order to set padding. -->
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="{x:Type DataGridCell}">
						<Border x:Name="border" Background="Transparent" SnapsToDevicePixels="True" BorderThickness="0" BorderBrush="Transparent" Padding="10"
VerticalAlignment="Center">
							<ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Style.Triggers>
				<Trigger Property="IsSelected" Value="True">
					<Setter Property="Background" Value="{x:Null}" />
					<Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
				</Trigger>
			</Style.Triggers>
		</Style>
		<Style x:Key="SmallGridRow" TargetType="DataGridRow">
			<Setter Property="Background" Value="{x:Null}" />
			<Style.Triggers>
				<Trigger Property="IsSelected" Value="True">
					<Setter Property="Background" Value="{x:Null}" />
					<Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
				</Trigger>
			</Style.Triggers>
		</Style>
		<Style x:Key="SmallGridHeader" TargetType="Border">
			<Setter Property="CornerRadius" Value="10" />
			<Setter Property="Padding" Value="5" />
			<Style.Triggers>
				<DataTrigger Binding="{Binding Settings.DarkMode}" Value="True">
					<Setter Property="Background">
						<Setter.Value>
							<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
								<GradientStop Color="#27363c" Offset="0" />
								<GradientStop Color="#292b40" Offset="1" />
							</LinearGradientBrush>
						</Setter.Value>
					</Setter>
				</DataTrigger>
				<DataTrigger Binding="{Binding Settings.DarkMode}" Value="False">
					<Setter Property="Background">
						<Setter.Value>
							<LinearGradientBrush>
								<GradientStop Color="#D9E3D8"/>
								<GradientStop Color="#E1E5ED"/>
							</LinearGradientBrush>
						</Setter.Value>
					</Setter>
				</DataTrigger>
			</Style.Triggers>
		</Style>
		<Style x:Key="SmallGridHeaderText" TargetType="TextBlock" BasedOn="{StaticResource BaseTextBlockStyle}">
			<Setter Property="FontSize" Value="20" />
		</Style>
		<Style x:Key="SmallGridContainer" TargetType="StackPanel" />
		<CollectionViewSource x:Key="GameViews" Source="{Binding TopOwnedGames}" />
		<SolidColorBrush x:Key="DiscountedPriceBrush" Color="#FF1B8F1B" />
		<SolidColorBrush x:Key="DiscountedPriceBrushDark" Color="#FF39D439" />
		<SolidColorBrush x:Key="RegularPriceBrush" Color="#FFA74F39" />
		<SolidColorBrush x:Key="RegularPriceBrushDark" Color="#ff7b5a" />
	</UserControl.Resources>
	<StackPanel MaxWidth="1000" Margin="0,10">
		<TextBlock Text="Account Value" FontSize="64" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,50,0,40"/>
		<WrapPanel HorizontalAlignment="Center" Orientation="Horizontal" >
			<StackPanel Margin="30,0">
				<TextBlock Text="{Binding TotalSpentIfDiscountedPrice, Converter={StaticResource MoneyFormatConverter}}" d:Text="$399" FontSize="48" FontWeight="Bold" d:Foreground="{StaticResource DiscountedPriceBrush}">
					<TextBlock.Style>
						<Style TargetType="TextBlock">
							<Style.Triggers>
								<DataTrigger Binding="{Binding Settings.DarkMode}" Value="True">
									<Setter Property="Foreground" Value="{StaticResource DiscountedPriceBrushDark}" />
								</DataTrigger>
								<DataTrigger Binding="{Binding Settings.DarkMode}" Value="False">
									<Setter Property="Foreground" Value="{StaticResource DiscountedPriceBrush}" />
								</DataTrigger>
							</Style.Triggers>
						</Style>
					</TextBlock.Style>
				</TextBlock>
				<TextBlock Text="Lowest prices" HorizontalAlignment="Center" FontSize="18" />
			</StackPanel>
			<StackPanel Margin="30,0">
				<TextBlock Text="{Binding TotalSpentIfRegularPrice, Converter={StaticResource MoneyFormatConverter}}" d:Text="$4,999" FontSize="48" FontWeight="Bold" d:Foreground="{StaticResource RegularPriceBrush}">
					<TextBlock.Style>
						<Style TargetType="TextBlock">
							<Style.Triggers>
								<DataTrigger Binding="{Binding Settings.DarkMode}" Value="True">
									<Setter Property="Foreground" Value="{StaticResource RegularPriceBrushDark}" />
								</DataTrigger>
										<DataTrigger Binding="{Binding Settings.DarkMode}" Value="False">
									<Setter Property="Foreground" Value="{StaticResource RegularPriceBrush}" />
								</DataTrigger>
							</Style.Triggers>
						</Style>
					</TextBlock.Style>
				</TextBlock>
				<TextBlock Text="Today's prices" HorizontalAlignment="Center" FontSize="18" />
			</StackPanel>
		</WrapPanel>
		<StackPanel Margin="100,0">
			<DockPanel Margin="0,20,0,5">
				<TextBlock Name="GamesPlayedInfo" d:Text="30 out of 120 games played" DockPanel.Dock="Left" TextAlignment="Left" />
				<TextBlock Text="{Binding PlayedGamesRatio, Mode=OneTime, StringFormat={}{0:P1}}" d:Text="25%"  DockPanel.Dock="Right" TextAlignment="Right" />
			</DockPanel>
			<ProgressBar Height="15" Value="{Binding PlayedGamesRatio, Mode=OneTime}" Maximum="1">
				<ProgressBar.Resources>
					<Style TargetType="{x:Type Border}">
						<Setter Property="CornerRadius" Value="5"/>
					</Style>
				</ProgressBar.Resources>
			</ProgressBar>
		</StackPanel>
		<WrapPanel HorizontalAlignment="Center">
			<StackPanel Style="{StaticResource Card}">
				<TextBlock Text="Average price" Style="{StaticResource LabelStyle}"/>
				<TextBlock Text="{Binding AveragePrice, Converter={StaticResource MoneyFormatConverter}}" d:Text="$5.2" Style="{StaticResource ValueStyle}"/>
			</StackPanel>
			<StackPanel Style="{StaticResource Card}">
				<TextBlock Text="Average price per hour" Style="{StaticResource LabelStyle}"/>
				<TextBlock Text="{Binding PricePerHour, Converter={StaticResource MoneyFormatConverter}}" d:Text="$0.32" Style="{StaticResource ValueStyle}"/>
			</StackPanel>
			<StackPanel Style="{StaticResource Card}">
				<TextBlock Text="Total playtime" Style="{StaticResource LabelStyle}"/>
				<TextBlock Text="{Binding TotalPlaytime, Converter={StaticResource PlaytimeConverter}, Mode=OneTime}" d:Text="4000 h" Style="{StaticResource ValueStyle}"/>
		</StackPanel>
		</WrapPanel>
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition />
			</Grid.RowDefinitions>
			<Grid.ColumnDefinitions>
				<ColumnDefinition />
				<ColumnDefinition />
			</Grid.ColumnDefinitions>
			<StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,5,0">
				<StackPanel Style="{StaticResource SmallGridContainer}">
					<Border Style="{StaticResource SmallGridHeader}">
						<TextBlock Style="{StaticResource SmallGridHeaderText}">
							<Run Text="&#xeedc;" FontFamily="{DynamicResource FontIcoFont}" />
							<Run Text="Games by time played" />
						</TextBlock>
					</Border>
					<DataGrid Style="{StaticResource SmallGrid}" ItemsSource="{Binding GamesByPlaytime}">
						<DataGrid.Columns>
							<DataGridTextColumn Binding="{Binding Group}" Width="*" />
							<DataGridTextColumn Binding="{Binding Sum}" Width="*" />
						</DataGrid.Columns>
						<DataGrid.Resources>
							<Style TargetType="DataGridCell" BasedOn="{StaticResource SmallGridCell}" />
							<Style TargetType="DataGridRow" BasedOn="{StaticResource SmallGridRow}" />
						</DataGrid.Resources>
					</DataGrid>
				</StackPanel>
				<StackPanel Style="{StaticResource SmallGridContainer}">
					<Border Style="{StaticResource SmallGridHeader}">
						<TextBlock Style="{StaticResource SmallGridHeaderText}">
							<Run Text="&#xf024;" FontFamily="{DynamicResource FontIcoFont}" />
							<Run Text="Hours on record" />
						</TextBlock>
					</Border>
					<DataGrid Style="{StaticResource SmallGrid}" ItemsSource="{Binding PlaytimeByKind}">
						<DataGrid.Columns>
							<DataGridTextColumn Binding="{Binding Group}" Width="*"/>
							<DataGridTextColumn Binding="{Binding Sum, Converter={StaticResource PlaytimeConverter}}" Width="*" />
						</DataGrid.Columns>
						<DataGrid.Resources>
							<Style TargetType="DataGridCell" BasedOn="{StaticResource SmallGridCell}" />
							<Style TargetType="DataGridRow" BasedOn="{StaticResource SmallGridRow}" />
						</DataGrid.Resources>
					</DataGrid>
				</StackPanel>
			</StackPanel>
			<StackPanel Grid.Row="0" Grid.Column="1" Margin="5,0,0,0">
				<StackPanel Style="{StaticResource SmallGridContainer}">
					<Border Style="{StaticResource SmallGridHeader}">
						<TextBlock Style="{StaticResource SmallGridHeaderText}">
							<Run Text="&#xf024;" FontFamily="{DynamicResource FontIcoFont}" />
							<Run Text="Products by cost" />
						</TextBlock>
					</Border>
					<DataGrid Style="{StaticResource SmallGrid}" ItemsSource="{Binding GamesByCost}">
						<DataGrid.Columns>
							<DataGridTextColumn Binding="{Binding Group}" Width="2*"/>
							<DataGridTextColumn Binding="{Binding Sum}" Width="*" />
							<DataGridTextColumn Binding="{Binding Acc}" Width="*" FontStyle="Italic" Foreground="{DynamicResource TextBrushDarker}" />
						</DataGrid.Columns>
						<DataGrid.Resources>
							<Style TargetType="DataGridCell" BasedOn="{StaticResource SmallGridCell}" />
							<Style TargetType="DataGridRow" BasedOn="{StaticResource SmallGridRow}" />
						</DataGrid.Resources>
					</DataGrid>
				</StackPanel>
				<StackPanel Style="{StaticResource SmallGridContainer}">
					<Border Style="{StaticResource SmallGridHeader}">
						<TextBlock Style="{StaticResource SmallGridHeaderText}">
							<Run Text="&#xf024;" FontFamily="{DynamicResource FontIcoFont}" />
							<Run Text="Average price per hour" />
						</TextBlock>
					</Border>
					<DataGrid Style="{StaticResource SmallGrid}" ItemsSource="{Binding AveragePricePerHour}">
						<DataGrid.Columns>
							<DataGridTextColumn Binding="{Binding Group}" Width="*"/>
							<DataGridTemplateColumn Width="*">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Average, Converter={StaticResource MoneyFormatConverter}}" />
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
						<DataGrid.Resources>
							<Style TargetType="DataGridCell" BasedOn="{StaticResource SmallGridCell}" />
							<Style TargetType="DataGridRow" BasedOn="{StaticResource SmallGridRow}" />
						</DataGrid.Resources>
					</DataGrid>
				</StackPanel>
			</StackPanel>
		</Grid>
		<DataGrid ItemsSource="{Binding Source={StaticResource GameViews}}" Height="422">
			<DataGrid.Style>
				<Style TargetType="DataGrid" BasedOn="{StaticResource {x:Type DataGrid}}">
					<Setter Property="SelectionMode" Value="Single" />
					<Setter Property="SelectionUnit" Value="FullRow" />
					<Setter Property="AutoGenerateColumns" Value="False" />
					<Setter Property="IsReadOnly" Value="True" />
					<Setter Property="CanUserAddRows" Value="False" />
					<Setter Property="CanUserDeleteRows" Value="False" />
					<Setter Property="CanUserResizeRows" Value="False" />
					<Setter Property="CanUserReorderColumns" Value="False" />
					<Setter Property="GridLinesVisibility" Value="All" />
					<Setter Property="HeadersVisibility" Value="Column" />
				</Style>
			</DataGrid.Style>
			<DataGrid.Resources>
				<Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
					<Setter Property="FontWeight" Value="Bold" />
				</Style>
			</DataGrid.Resources>
			<DataGrid.Columns>
				<DataGridTemplateColumn CanUserSort="False" CanUserResize="False">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<Image Source="{Binding IconSource}" Width="32" Height="32" RenderOptions.BitmapScalingMode="HighQuality" />
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
				<DataGridTextColumn Header="Game" Width="*" Binding="{Binding Name}" />
				<DataGridTextColumn Header="Price/Hour" Binding="{Binding PricePerHour, Converter={StaticResource MoneyFormatConverter}}" SortMemberPath="PricePerHour" />
				<DataGridTextColumn Header="Price" Binding="{Binding Price, Converter={StaticResource MoneyFormatConverter}}" />
				<DataGridTextColumn Header="Playtime" Binding="{Binding Time, Converter={StaticResource PlaytimeConverter}}" />
			</DataGrid.Columns>
		</DataGrid>
	</StackPanel>
</UserControl>